(this.webpackJsonpversion_01_network=this.webpackJsonpversion_01_network||[]).push([[5],{200:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(55);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(i){r=!0,l=i}finally{try{n||null==s.return||s.return()}finally{if(r)throw l}}return a}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},204:function(e,t,a){"use strict";var n=a(54),r=a(0),l=a.n(r),o=a(208),s=a.n(o),i=a(198),c=function(e){var t=e.label,a=e.name,r=e.key,o=Object(n.a)(e,["label","name","key"]);return l.a.createElement("div",{className:s.a.formik_controls},l.a.createElement("label",{htmlFor:a},t),l.a.createElement(i.b,Object.assign({as:"textarea",key:r,id:a,name:a},o)),l.a.createElement(i.a,{name:a,component:f}))},u=function(e){var t=e.label,a=e.name,r=e.key,o=Object(n.a)(e,["label","name","key"]);return l.a.createElement("div",{className:s.a.formik_controls},l.a.createElement("label",{htmlFor:a},t),l.a.createElement(i.b,Object.assign({id:a,key:r,name:a},o)),l.a.createElement(i.a,{name:a,component:f}))},m=function(e){var t=e.label,a=e.name,r=e.options,o=Object(n.a)(e,["label","name","options"]);return l.a.createElement("div",{className:s.a.formik_controls},l.a.createElement("label",null,t),l.a.createElement(i.b,Object.assign({name:a},o),(function(e){var t=e.field;return r.map((function(e){return l.a.createElement(l.a.Fragment,{key:e.key},l.a.createElement("input",Object.assign({type:"checkbox",id:e.value},t,{value:e.value,checked:t.value.includes(e.value)})),l.a.createElement("label",{htmlFor:e.value},e.key))}))})),l.a.createElement(i.a,{name:a,component:f}))},f=function(e){return l.a.createElement("div",{className:s.a.error},e.children)};t.a=function(e){var t=e.control,a=Object(n.a)(e,["control"]);switch(t){case"input":return l.a.createElement(u,a);case"textarea":return l.a.createElement(c,a);case"checkbox":return l.a.createElement(m,a);default:return null}}},208:function(e,t,a){e.exports={formControls:"FormControls_formControls__4c7Yh",error:"FormControls_error__uKFST",App:"FormControls_App__3XoIW",input:"FormControls_input__229Xk",forms_control:"FormControls_forms_control__1AmpX"}},210:function(e,t,a){e.exports=a.p+"static/media/user.c3dacb0b.svg"},246:function(e,t,a){e.exports={profile:"Profile_profile__F8YN9",userImg:"Profile_userImg__2qokz",user:"Profile_user__DrajQ",postForm:"Profile_postForm__2-TE4",addPost:"Profile_addPost__1Ck26",button:"Profile_button__1kYAH"}},247:function(e,t,a){e.exports={profile_info:"ProfileInfo_profile_info__3V6jF",img_container:"ProfileInfo_img_container__1spJ7",img:"ProfileInfo_img__OSL9u",profile_photo_input:"ProfileInfo_profile_photo_input__2nWkW",status:"ProfileInfo_status__2fcwA",status_text:"ProfileInfo_status_text__2f3G-",form_error:"ProfileInfo_form_error__iEUvC",profile_data:"ProfileInfo_profile_data__2nEVh",profile_data_item:"ProfileInfo_profile_data_item__v-S0Q",status_popup:"ProfileInfo_status_popup__oMm17",addPost_item:"ProfileInfo_addPost_item__y29qq"}},261:function(e,t,a){e.exports={img:"Post_img__3rTv6",post:"Post_post__3PbZK",post__item:"Post_post__item__2S5Qo",post___content:"Post_post___content__3s8Vl",post_message:"Post_post_message__3IWbM",likes_container:"Post_likes_container__1i5gj",likes:"Post_likes__36odM",liked:"Post_liked__yrO5v"}},283:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(22),l=a(24),o=a(23),s=a(0),i=a.n(s),c=a(246),u=a.n(c),m=a(200),f=a(44),p=a(210),d=a.n(p),_=a(247),E=a.n(_),b=function(e){var t=Object(s.useState)(!1),a=Object(m.a)(t,2),n=a[0],r=a[1],l=Object(s.useState)(e.status),o=Object(m.a)(l,2),c=o[0],u=o[1],f=Object(s.useState)(!1),p=Object(m.a)(f,2),d=p[0],_=p[1];Object(s.useEffect)((function(){u(e.status)}),[e.status]);return i.a.createElement("div",{className:E.a.status},!n&&i.a.createElement("div",{className:E.a.status_text},i.a.createElement("div",null,i.a.createElement("b",null,"Status: "),i.a.createElement("span",{onMouseOver:function(){_(!0)},onMouseOut:function(){_(!1)},onDoubleClick:function(){e.authorizedUserId===e.profile.userId&&r(!0)}}," ",e.status||"there is no status")),d&&e.authorizedUserId===e.profile.userId&&i.a.createElement("div",{className:E.a.status_popup},"DoubleClick to change status")),n&&i.a.createElement("div",null,i.a.createElement("b",null,"Status: "),i.a.createElement("input",{onChange:function(e){!function(e){e.preventDefault(),u(e.currentTarget.value)}(e)},autoFocus:!0,onBlur:function(){r(!1),e.updateStatusThunk(c)},value:c})))},h=a(198),v=a(204),g=a(215),k=function(e){var t=e.profile,a=e.onSubmit,n=e.errorMessage;return i.a.createElement(h.d,{initialValues:{fullName:t.fullName,lookingForAJob:!1,lookingForAJobDescription:t.lookingForAJobDescription,aboutMe:t.aboutMe,contacts:t.contacts},validationSchema:g.b({fullName:g.c().required("Required field"),lookingForAJob:g.a().required("Required field"),lookingForAJobDescription:g.c().required("Required field"),aboutMe:g.c().required("Required field"),contacts:g.b().required("Required field")}),onSubmit:a},(function(e){return i.a.createElement(h.c,null,i.a.createElement("div",null,i.a.createElement("b",null,"FullName :"),t.fullName,i.a.createElement(v.a,{control:"input",name:"fullName",placeholder:"Write your name here"})),i.a.createElement("div",null,i.a.createElement("b",null,"LookingForAJob: "),t.lookingForAJob?"yes":"no",i.a.createElement(h.b,{type:"checkbox",name:"lookingForAJob"})),i.a.createElement("div",null,i.a.createElement("b",null,"My skills: "),t.lookingForAJobDescription,i.a.createElement(v.a,{control:"textarea",name:"lookingForAJobDescription",placeholder:"My skills"})),i.a.createElement("div",null,i.a.createElement("b",null,"About me: "),t.aboutMe,i.a.createElement(v.a,{control:"textarea",name:"aboutMe",placeholder:"About me"})),i.a.createElement("div",null,i.a.createElement("b",null,"Contacts:"),Object.keys(t.contacts).map((function(e){return i.a.createElement("div",{key:e},e,": ",i.a.createElement(v.a,{key:e,control:"input",name:"contacts."+e,placeholder:e}))}))),i.a.createElement("div",null,i.a.createElement("button",{type:"submit"},"Save"),n))}))},P=function(e){var t=e.profile,a=e.isOwner,n=e.goToEditMode;return i.a.createElement("div",null,i.a.createElement("div",{className:E.a.profile_data_item},i.a.createElement("b",null,"FullName :"),t.fullName),i.a.createElement("div",{className:E.a.profile_data_item},i.a.createElement("b",null,"LookingForAJob: "),t.lookingForAJob?"yes":"no"),t.lookingForAJob&&i.a.createElement("div",{className:E.a.profile_data_item},i.a.createElement("b",null,"My skills: "),t.lookingForAJobDescription),i.a.createElement("div",{className:E.a.profile_data_item},i.a.createElement("b",null,"About me: "),t.aboutMe),i.a.createElement("div",{className:E.a.profile_data_item},i.a.createElement("b",null,"Contacts:"),Object.keys(t.contacts).map((function(e){return i.a.createElement(y,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))),a&&i.a.createElement("div",null,i.a.createElement("button",{className:E.a.profile_data_item,onClick:n},"Edit")))},y=function(e){var t=e.contactTitle,a=e.contactValue;return i.a.createElement("div",null,i.a.createElement("div",{className:E.a.profile_data_item},i.a.createElement("b",null," ",t),": ",i.a.createElement("span",null,a)))},O=function(e){var t=e.profile,a=e.status,n=e.updateStatusThunk,r=e.isOwner,l=e.savePhotoThunk,o=e.saveProfileThunk,c=e.authorizedUserId,u=e.errorMessage,p=Object(s.useState)(!1),_=Object(m.a)(p,2),h=_[0],v=_[1];if(!t)return i.a.createElement(f.a,null);var g=i.a.createRef();return i.a.createElement("div",{className:E.a.profile_info},i.a.createElement("div",{className:E.a.img_container},i.a.createElement("img",{className:E.a.img,src:t.photos.large||d.a,alt:""}),r&&i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){g.current.click()}},"Change Photo"),i.a.createElement("input",{className:E.a.profile_photo_input,ref:g,type:"file",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&l(e.target.files[0])}})),i.a.createElement(b,{profile:t,authorizedUserId:c,status:a,updateStatusThunk:n})),i.a.createElement("div",{className:E.a.profile_data},h?i.a.createElement(k,{initialValues:t,profile:t,onSubmit:function(e){o(e).then((function(){v(!1)}))},errorMessage:u}):i.a.createElement(P,{profile:t,isOwner:r,goToEditMode:function(){return v(!0)}})))},N=a(27),j=a(261),S=a.n(j),T=a(28),I=a.n(T);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var C=i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{fill:"current",d:"M83.578,167.256H16.716C7.524,167.256,0,174.742,0,183.971v300.881c0,9.225,7.491,16.713,16.716,16.713h66.862 c9.225,0,16.716-7.489,16.716-16.713V183.971C100.294,174.742,92.769,167.256,83.578,167.256z"}))),M=i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{fill:"current",d:"M470.266,167.256c-2.692-0.456-128.739,0-128.739,0l17.606-48.032c12.148-33.174,4.283-83.827-29.424-101.835 c-10.975-5.864-26.309-8.809-38.672-5.697c-7.09,1.784-13.321,6.478-17.035,12.767c-4.271,7.233-3.83,15.676-5.351,23.696 c-3.857,20.342-13.469,39.683-28.354,54.2c-25.952,25.311-106.571,98.331-106.571,98.331v267.45h278.593 c37.592,0.022,62.228-41.958,43.687-74.749c22.101-14.155,29.66-43.97,16.716-66.862c22.102-14.155,29.66-43.97,16.716-66.862 C527.572,235.24,514.823,174.792,470.266,167.256z"}))),A=i.a.createElement("g",null),w=i.a.createElement("g",null),D=i.a.createElement("g",null),J=i.a.createElement("g",null),q=i.a.createElement("g",null),z=i.a.createElement("g",null),U=i.a.createElement("g",null),R=i.a.createElement("g",null),V=i.a.createElement("g",null),W=i.a.createElement("g",null),L=i.a.createElement("g",null),B=i.a.createElement("g",null),Q=i.a.createElement("g",null),X=i.a.createElement("g",null),Y=i.a.createElement("g",null),H=function(e){var t=e.svgRef,a=e.title,n=x(e,["svgRef","title"]);return i.a.createElement("svg",F({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 511.999 511.999",style:{enableBackground:"new 0 0 511.999 511.999"},xmlSpace:"preserve",ref:t},n),a?i.a.createElement("title",null,a):null,C,M,A,w,D,J,q,z,U,R,V,W,L,B,Q,X,Y)},K=i.a.forwardRef((function(e,t){return i.a.createElement(H,F({svgRef:t},e))})),G=(a.p,function(e){var t=Object(s.useState)(e.likesCount),a=Object(m.a)(t,2),n=a[0],r=a[1],l=I.a;e.profile&&e.profile.photos.small&&(l=e.profile.photos.small);return i.a.createElement("div",{className:S.a.post},i.a.createElement("div",{className:S.a.post__item},i.a.createElement("div",{className:S.a.post___content},i.a.createElement("img",{className:S.a.img,src:l,alt:""}),e.profile&&i.a.createElement("h3",{className:S.a.name},e.profile.fullName)),i.a.createElement("button",{className:S.a.delete_button,onClick:function(t){t.preventDefault(),e.deletePost(e.id)}},"DELETE")),i.a.createElement("div",null,i.a.createElement("p",{className:S.a.post_message},e.message),i.a.createElement("div",{className:S.a.likes_container},i.a.createElement("div",null,i.a.createElement(K,{className:"".concat(S.a.likes," ").concat(n>0&&S.a.liked),onClick:function(e){return function(e){e.preventDefault(),r(n+1)}(e)}})),i.a.createElement("b",null," ",n))))}),Z=function(e){return i.a.createElement(h.d,{initialValues:{newPostText:""},validationSchema:g.b({newPostText:g.c().required("Cannot send an empty post").max(50)}),onSubmit:function(t,a){var n=a.resetForm;e.onSubmit(t),n()}},(function(e){return i.a.createElement(h.c,null,i.a.createElement(v.a,{control:"textarea",name:"newPostText",placeholder:"Write your text here"}),i.a.createElement("button",{className:u.a.button,type:"submit"},"Send"))}))},$=i.a.memo((function(e){if(console.log("RENDER"),!e.profile)return i.a.createElement(f.a,null);var t=I.a;e.profile.photos.small&&(t=e.profile.photos.small);var a=Object(N.a)(e.posts).map((function(t){return i.a.createElement(G,{profile:e.profile,key:t.id,id:t.id,message:t.message,likesCount:t.likesCount,deletePost:e.deletePost})})),n=e.posts.length+2;return i.a.createElement("div",{className:u.a.posts},i.a.createElement("div",null,i.a.createElement("div",{className:u.a.postForm},i.a.createElement("div",{className:u.a.user},i.a.createElement("img",{className:u.a.userImg,src:t,alt:""}),i.a.createElement("h3",null,e.profile.fullName)),i.a.createElement("div",{className:u.a.addPost},i.a.createElement("div",{className:u.a.addPost_item},i.a.createElement(Z,{onSubmit:function(t){e.addPost(t.newPostText,n)}}))))),a)})),ee=function(e){return i.a.createElement("div",{className:u.a.profile},i.a.createElement(O,Object.assign({},e,{isOwner:e.isOwner,profile:e.profile,status:e.status,authorizedUserId:e.authorizedUserId,updateStatusThunk:e.updateStatusThunk,saveProfileThunk:e.saveProfileThunk,savePhotoThunk:e.savePhotoThunk,errorMessage:e.errorMessage})),i.a.createElement($,e))},te=a(18),ae=a(69),ne=a(6),re=a(17),le=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).refreshProfile=function(){var t=+e.props.match.params.userId;t||(t=e.props.authorizedUserId)||e.props.history.push("/login"),t?(e.props.getProfileThunk(t),e.props.getStatusThunk(t)):console.error("UserID should exist!!!")},e.componentDidMount=function(){e.refreshProfile()},e.componentDidUpdate=function(t,a,n){e.props.match.params.userId!==t.match.params.userId&&e.refreshProfile()},e}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement(ee,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatusThunk:this.props.updateStatusThunk,savePhotoThunk:this.props.savePhotoThunk,saveProfileThunk:this.props.saveProfileThunk,authorizedUserId:this.props.authorizedUserId,posts:this.props.posts,errorMessage:this.props.errorMessage}))}}]),a}(i.a.Component);t.default=Object(re.d)(Object(te.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth,posts:e.profilePage.posts,errorMessage:e.profilePage.errorMessage}}),{getProfileThunk:ae.c,getStatusThunk:ae.d,updateStatusThunk:ae.g,savePhotoThunk:ae.e,saveProfileThunk:ae.f,addPost:ae.a.addPost,deletePost:ae.a.deletePost}),ne.g)(le)}}]);
//# sourceMappingURL=5.47253aec.chunk.js.map